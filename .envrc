# project-lint Environment Configuration

# Helper functions to modify PATH idempotently
path_prepend() {
  local p="$1"
  if [ -d "$p" ] && [[ ":$PATH:" != *":$p:"* ]]; then
    export PATH="$p:$PATH"
  fi
}

# Ensure nix profile bin is on PATH for direnv hooks
path_prepend "/nix/var/nix/profiles/default/bin"
# Ensure devbox is available
path_prepend "$HOME/.nix-profile/bin"

# Use devbox for development environment
use_devbox() {
    watch_file devbox.json
    eval "$(devbox shellenv)"
}

if command -v devbox >/dev/null 2>&1; then
    use devbox
fi

echo "ğŸ”§ project-lint environment initialized"
echo "ğŸ’¡ Run 'just --list' to see available commands"
